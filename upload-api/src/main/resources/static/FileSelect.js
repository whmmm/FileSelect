!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var i in t)("object"==typeof exports?exports:e)[i]=t[i]}}("undefined"!=typeof self?self:this,function(){return function(e){function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=16)}([function(e,n){function t(e,n){var t=e[1]||"",l=e[3];if(!l)return t;if(n&&"function"==typeof btoa){var s=i(l);return[t].concat(l.sources.map(function(e){return"/*# sourceURL="+l.sourceRoot+e+" */"})).concat([s]).join("\n")}return[t].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var i=t(n,e);return n[2]?"@media "+n[2]+"{"+i+"}":i}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},l=0;l<this.length;l++){var s=this[l][0];"number"==typeof s&&(i[s]=!0)}for(l=0;l<e.length;l++){var a=e[l];"number"==typeof a[0]&&i[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n,t){function i(e){for(var n=0;n<e.length;n++){var t=e[n],i=A[t.id];if(i){i.refs++;for(var l=0;l<i.parts.length;l++)i.parts[l](t.parts[l]);for(;l<t.parts.length;l++)i.parts.push(s(t.parts[l]));i.parts.length>t.parts.length&&(i.parts.length=t.parts.length)}else{for(var a=[],l=0;l<t.parts.length;l++)a.push(s(t.parts[l]));A[t.id]={id:t.id,refs:1,parts:a}}}}function l(){var e=document.createElement("style");return e.type="text/css",p.appendChild(e),e}function s(e){var n,t,i=document.querySelector("style["+v+'~="'+e.id+'"]');if(i){if(f)return m;i.parentNode.removeChild(i)}if(h){var s=u++;i=d||(d=l()),n=a.bind(null,i,s,!1),t=a.bind(null,i,s,!0)}else i=l(),n=o.bind(null,i),t=function(){i.parentNode.removeChild(i)};return n(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;n(e=i)}else t()}}function a(e,n,t,i){var l=t?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(n,l);else{var s=document.createTextNode(l),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(s,a[n]):e.appendChild(s)}}function o(e,n){var t=n.css,i=n.media,l=n.sourceMap;if(i&&e.setAttribute("media",i),g.ssrId&&e.setAttribute(v,n.id),l&&(t+="\n/*# sourceURL="+l.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=t(20),A={},p=r&&(document.head||document.getElementsByTagName("head")[0]),d=null,u=0,f=!1,m=function(){},g=null,v="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,n,t,l){f=t,g=l||{};var s=c(e,n);return i(s),function(n){for(var t=[],l=0;l<s.length;l++){var a=s[l],o=A[a.id];o.refs--,t.push(o)}n?(s=c(e,n),i(s)):s=[];for(var l=0;l<t.length;l++){var o=t[l];if(0===o.refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete A[o.id]}}}};var b=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}()},function(e,n){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)},function(e,n){e.exports=function(e,n,t,i,l,s){var a,o=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(a=e,o=e.default);var c="function"==typeof o?o.options:o;n&&(c.render=n.render,c.staticRenderFns=n.staticRenderFns,c._compiled=!0),t&&(c.functional=!0),l&&(c._scopeId=l);var A;if(s?(A=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=A):i&&(A=i),A){var p=c.functional,d=p?c.render:c.beforeCreate;p?(c._injectStyles=A,c.render=function(e,n){return A.call(n),d(e,n)}):c.beforeCreate=d?[].concat(d,A):[A]}return{esModule:a,exports:o,options:c}}},function(e,n){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,n){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,n,t){e.exports=!t(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,t){var i=t(46),l=t(48);e.exports=function(e){return i(l(e))}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__components_FileSelect_Sub_UploadFile__=__webpack_require__(21),__WEBPACK_IMPORTED_MODULE_1__components_FileSelect_Sub_ListFile__=__webpack_require__(28);window.randomString_FileSelect=function(e){e=e||32;for(var n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",t=n.length,i="",l=0;l<e;l++)i+=n.charAt(Math.floor(Math.random()*t));return i},window.getUrlParam_FileSelect=function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.href.split("?");if(2==t.length){var i=t[1].substr(0).match(n);if(null!=i){var l=unescape(i[2]);return""===l.trim()?null:l}return null}return null},__webpack_exports__.a={components:{ListFile:__WEBPACK_IMPORTED_MODULE_1__components_FileSelect_Sub_ListFile__.a,UploadFile:__WEBPACK_IMPORTED_MODULE_0__components_FileSelect_Sub_UploadFile__.a},model:{prop:"value",event:"selectImage"},name:"FileSelect",props:{value:{type:[String,Array],default:function(){return[]}},trigger:{type:Boolean,default:!1},height:{type:String,default:"400px"},type:{type:String,default:function(){return getUrlParam_FileSelect("type")||"image"}},limit:{type:[Number,String],default:function(){return Number(getUrlParam_FileSelect("limit"))||1}},uploadUrl:"",listUrl:""},data:function(){return{menuList:[],index:0,menu:{uploadImg:[{title:"图片上传"},{title:"已上传图片选择"},{title:"在线插入"}],uploadDoc:[{title:"文档上传"},{title:"已上传文档选择"}],uploadVideo:[{title:"视频上传"},{title:"已上传视频选择"}],uploadAudio:[{title:"音频上传"},{title:"已上传音频选择"}]}}},created:function(){this.setMenuList()},methods:{setMenuList:function(){var e=this;switch(e.type){case"image":e.menuList=e.menu.uploadImg;break;case"doc":e.menuList=e.menu.uploadDoc;break;case"video":e.menuList=e.menu.uploadVideo;break;case"audio":e.menuList=e.menu.uploadAudio}},tabClick:function tabClick(v1,v2){this.index=eval(v1.index)},confirmSelect:function(e){if(1==e){var n=this.$refs.ListFile[0].selectFileMap,t=[];if(1===this.limit)for(var i in n){t=i;break}else for(var l in n)t.push(l);this.$emit("selectImage",t)}}}}},function(e,n,t){"use strict";n.a={name:"UploadFile",props:{type:{type:String,default:"image"},uploadUrl:{type:String,default:"/upload"}},data:function(){return{uploadBtnId:"webUploader_"+randomString_FileSelect(10),listItem:[],uploader:{}}},methods:{triggerUploadBtn:function(){var e=this;$("#"+e.uploadBtnId).find(".webuploader-element-invisible").trigger("click")},startUpload:function(){this.listItem.forEach(function(e){0===e.state&&(e.state=1)});try{this.uploader.upload()}catch(e){}}},mounted:function(){var e=this,n={},t=[];switch(e.type){case"image":t={title:"Images",extensions:"gif,jpg,jpeg,bmp,png,ico,icon",mimeTypes:"image/*"};break;case"file":t={title:"file",extensions:"doc,docx,jpeg,bmp,png",mimeTypes:"image/*"};break;case"video":t={title:"video",extensions:"mp4,",mimeTypes:"audio/*"};break;case"audio":t={title:"audio",extensions:"mp3,m4a",mimeTypes:"image/*"}}e.uploader=new WebUploader.Uploader({crop:!1,auto:!1,server:e.uploadUrl,pick:{id:"#"+e.uploadBtnId,multiple:!0},resize:!1,accept:t,fileNumLimit:50,chunked:!0,compress:{quality:20,allowMagnify:!1,crop:!1,preserveHeaders:!1,noCompressIfLarger:!1,compressSize:0}});var i=e.uploader;i.on("fileQueued",function(t){i.makeThumb(t,function(i,l){i&&(l="缩略图失败."),e.listItem.push({id:t.id,src:l,state:0,msg:""}),n[t.id]=e.listItem.length-1},"200","200")}),i.on("uploadSuccess",function(t,i){var l=e.listItem[n[t.id]];"success"===i.state?l.state=2:"warning"===i.state&&(l.state=4,l.msg=i.msg)}),i.on("uploadError",function(t){var i=e.listItem[n[t.id]];i.state=3,i.msg="网络错误"}),i.on("error",function(n){"F_DUPLICATE"===n&&e.$message({message:"文件已经存在",type:"warning",showClose:!0})})}}},function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABLCAIAAAB7tddWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1Q0VBNzA0MjEyMDUxMUUzODk2Q0JFM0Q1RjE4QkExQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1Q0VBNzA0MzEyMDUxMUUzODk2Q0JFM0Q1RjE4QkExQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAzNDA2MkY1MTIwMzExRTM4OTZDQkUzRDVGMThCQTFDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAzNDA2MkY2MTIwMzExRTM4OTZDQkUzRDVGMThCQTFDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+K6izdgAAAvpJREFUeNrsnFmPqkAQhWmX667gEp9c/v+/MkSDG+4LrvdcSYgRbw/0ALZQ9WBUJOn+uqvqHGCG3e93hUJRUoSAQBAIAkEgCASBIBAE4neRicEcII51Xb/dbnjPGOt0OqlUKok7ApN3jIKwY6DUIBAEgkAQCALho/X47TeXy8U0TcuyrtdrZKPs9/v2m8FgINYgf9QX/gTV+Xw2DCNKBJKmxmKxsAVc0kEcDgfyGq8CNp/Pa5qWy+WiHG6v13v7/XPt6Ha7Al5D3HQ1Go1sNkvtU8lkMsmtESSoCASBSFqEW/DQ0tbr9W63O51OKK6FQkFV1XQ6nSwQ0OOTyQSvjknZbDaA0mq1QCQafSFFasxmM4eCE1Do0+lUQrcSFggsPhzq20NgsVqtkpIax+MxMs+C/aXruvMxaonND75J9W5hUWWxuYAVdRfTg8EplUphGJywQPAFuBd5Dlhw/aDwwgVtCDgCdzph1QisG+dosVjkn44WYxjGC4XnvBuNRtvt9gtA2Hv47SGsZKVS4ef8eDzG4vMVCrpSgEU3xPbZbDar1erLl1AQ7XabU8xAAXvB3XffBnIHwkR2QcUYq9fr5XIZOxkTg6BEkeNLKdQF7AWPFBy1AoUmu8RG/HmE91nxM+J/ORIr07VcLvf7feCt+stAQGIBRNJtOJolDAhdj/hXGj5+u+TzIKAF+MbkK00XFta2BhDRUE0/9gv8Elogbu4TBW8+nyPhHSeuaVqtVuNQC6TzyQUCXsg0TbfyAxfIKogr9ynP1GJyYQZ57qbg7AuIRfclKZwSlDqWBQSmxM9zFALYh+fFBwJJSkNgqeFxSrAPw+EQ9QJew7Is2Sj8FgSW2nu1gylYPkKRMsRTA+4IcjA2fxsnDkLOq/IfACFP54uP1yAQBIJAEIh4gWCPkHk+GJ7AjU/fICJ+qlIghEfoDwQMtRjvyLYDRih4rsDT+bBM9tP5kuhrzN++e6SqqvCdYUb/SIO6BoEgEASCQBAIAkEgCEQg8VeAAQAB1bbO2qoeewAAAABJRU5ErkJggg=="},function(e,n,t){"use strict";var i=t(31),l=t.n(i);n.a={name:"ListFile",model:{prop:"value",event:"changeSelect"},props:{trigger:{type:Boolean,default:!1},value:{type:Array,default:function(){return[]}},index:{type:Number,default:1},type:{type:String,default:function(){return"image"}},limit:{type:Number,default:1},fetchUrl:{type:String,default:"/upload/listFile"}},data:function(){return{fileList:[],timelineObject:{},requestParam:{page:1,limit:10},endPage:0,loading:!1,endLoad:!1,viewType:"list",viewCurrentVisible:!1,selectFileMap:{}}},mounted:function(){var e=this;e.requestParam.type=e.type,e.loadData(),$(".file-select-container").scroll(function(){if(1==e.index&&!e.loading&&void 0!=e.loading){var n=$(this),t=n.scrollTop(),i=n.height(),l=$(".list-container").height(),s=t+i;e.endPage<e.requestParam.page&&s+1>=l&&e.loadData()}})},methods:{loadData:function(){var e=this;e.endPage<e.requestParam.page&&$.get(e.fetchUrl,e.requestParam,function(n){null!=n&&null!=n.fileList&&n.fileList.length>0?(e.requestParam.page++,void 0!=n&&n.fileList.forEach(function(n){n.selected=!1,n.srcIndex=e.fileList.length,null!=e.selectFileMap[n.path]&&(e.selectFileMap[n.path].index=n.srcIndex,n.selected=!0);var t=e.fileList.push(n),i=e.fileList[t-1],l=n.uploadTime.substr(0,10),s=e.timelineObject[l];null==s&&(s=e.timelineObject[l]=[]),s.push(i)})):e.endPage=e.requestParam.page,setTimeout(function(){var n=$(".file-select-container").height(),t=$(".list-container").height();n>=t&&0!=t&&e.loadData()},300)})},changeType:function(e){this.viewType=e},select:function(e,n){if(1==this.limit){var t="",i=0;for(var l in this.selectFileMap){t=l,this.selectFileMap.hasOwnProperty(l)&&(i=this.selectFileMap[l]);break}if(""!=t){this.fileList[i.index].selected=!1,this.selectFileMap[t]=null,delete this.selectFileMap[t]}}else if(!this.selectFileMap.hasOwnProperty(e.path)&&this.limit<this.getObjLen(this.selectFileMap))return void this.$alert('最多上传 <span style="font-weight: 600;color:red">'+this.limit+" </span>个,请先移除旧数据","提示",{type:"error",dangerouslyUseHTMLString:!0}).catch(function(){});e.selected=!e.selected,e.selected?this.selectFileMap[e.path]={index:e.srcIndex,fileName:e.fileName}:(this.selectFileMap[e.path]=null,delete this.selectFileMap[e.path])},getObjLen:function(e){return l()(e).length},removeSelect:function(e,n){null!=e.index?(this.selectFileMap[n]=null,delete this.selectFileMap[n],this.fileList[e.index].selected=!1):this.$delete(this.selectFileMap,n)},updateViewBack:function(){var e=this,n=this.value;1==this.limit?this.selectFileMap[n]=null:n.forEach(function(n){var t=n.split("/");e.selectFileMap[n]={index:null,fileName:t.pop()}})}},watch:{index:function(e){1==e&&this.loadData()},trigger:function(e,n){!0===e&&this.updateViewBack()}}}},function(e,n){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,n){var t=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}},function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAFsElEQVR42u3dv0uVewDHcUUlFNGUxCAhcmlouC4tTZE0RC5CUKBFCG6ObnfoD2i6tLU5yV2E4EDgIiKBHIgihIIIIWhovYOClc/lGby3y9U8R4/P+f54veGzy3O+L74c9WhHhyRJkiRJkhRyL1++LDwF6ZBWV1eLnp4eQKQjcfxeACIdiQMQ6Rc4AJF+gQMQqaOjVqsdjgMQwVEruru7D8cBiOD4BQ5ABEcBiHQiHIAIDkCkk+EARLm0srLSPA5AlAuOrq6u5nEAIjgAERyASC3HAYjgAERwACItLy+3FgcgSglHZ2dna3EAIjgAERyACA5ApCpxAKIYW1paqgYHIIIDEMEBiOAARHAAIgWCAxDBAYgi7Pnz5+3HAYhCxdF2GIAIDkAEByCCAxDBAYhy69mzZ+HiAERwACI4ABEcgAgOQAQHIIIDEKns6dOnceIARHAAIjgAERyACA5ABAcgggMQ5dOTJ0/SwwGIWtHi4mKaOAARHIAIDkAEByCCAxDBAYgibGFhIS8cgAgOQAQHIIIDEMEBiOAARHAAovian5+HAhDBAYjgAERwACI4ABEcgCiQHj165PADIjgAERyACA5ABAcgggMQwQGIwu7BgwcOOCCCAxDBAYjgAERwACI4ABEcgCjspqenHWJABAcgggMQwQGI4ABEcACiQLp7967DCojgAERwACI4ABEcgAgOQASHARJ2t2/fdiABERyACA5ABAcgggMQwWGABNLNmzcdPEAEByBqolu3bjlwLd758+cBcXPYYRsbGyu2t7eLxcVFQOCww3ActLCwAAgcdhiOg87k31oLjhRwlO3v7xcPHz4EJIZu3LjhQFeI46AfP34U9+/fBwSOvHbx4sVjcZR9//69uHfvHiBw5IXj48eP1eMABA44AIEDDkDggAMQOOCoEgcgp+v69esOdMo4AIEjpI2MjISFAxA4QsLx/v37Y3GUPwisDAcgcMSGY2ZmxudB4IAjCByAwAEHIKduYmLCgc4RByBwwAEIHHAAAkf4Gx4ejgsHIHBUiePdu3dx4QAEDjgAgQMOQE7btWvXHGg4AInx5piamiomJyejwjE0NFS8ffu2aKTZ2Vl/etTNcbKV/7Nwb2+v2N3dLWL506VJ3ByAxIHj27dv/xyoGJAMDg6mgyNnIKHjmJ6e/g+OGJCUOF6/fp0OjlyBxICj/FDQUYWIJEkcOQKJ4btVr169Ovag7ezsBPPGfWBgoCEcwb8hzx3I1atXo3hR+vv7i3q9fuxhC+EmSfbmyA1ILDhiQpI8jlyAxIYjBiRZ4MgBSKw4fkbSyHuSKpGUX1MWOFIHEjuOg/X29gaDpMSxubmZB45UgXz9+vW3VHCEhCQ7HCkCKXGMj48n+ct/7USSJY7UgKSM42cka2trlSLJFkdKQHLAcbBz585VhiRrHKkAyQlHlUiyx5ECkBxxVIEEjgSA5IzjZySrq6stRdLX1wdH7EC+fPnyR+44DtbT09MyJCWOjY0NOGIGUuK4fPkyHC1GAkcCQOA4GyRwJAAEjsaQ1Gq1ppDAkQCQz58//3nlyhUIGtyLFy8a+tDVnTt3ivX19YY+7PT48eP8nqWbI811d3c3dJM0UpY3RyxAtre3/4KjfUj29/fzxRE6kBLHpUuXHPZTIllZWTkxjrm5ubyfIRzpr6urq2kkcAQMBI72IoEjYCBwtBcJHAEDgaMaJMvLy3DEBgSO6tbZ2fk/JHAEDOTTp08FHO1DAkfAQEoco6OjXog2rUQCR6BA4DBA4DBA4DBA4DBAzrIPHz7AYYDAYYA0iePChQsetgEChwEChwEChxkcZlUC2dragsMAOQrH0NCQh2qAwGGAwGGAwGF2JkDgMEDgMECa682bN3AYIEfhGBgY8OAMEDgMEDjMTgcEDgMEDrPmgNTrdTgMkKNw9Pf3e0AGCBxmDQKBw+zf/Q0pP3THuhwN5wAAAABJRU5ErkJggg=="},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t.d(n,"FileSelectMixin",function(){return l});var i=t(17);t.d(n,"FileSelect",function(){return i.a}),"undefined"!=typeof window&&window.Vue&&window.Vue.component("FileSelect",i.a);var l={data:function(){return{fileSelectTrigger:!1}}}},function(e,n,t){"use strict";function i(e){a||t(18)}var l=t(9),s=t(60),a=!1,o=t(3),r=i,c=o(l.a,s.a,!1,r,"data-v-8f3109e2",null);c.options.__file="src/components/FileSelect/FileSelect.vue",n.a=c.exports},function(e,n,t){var i=t(19);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(1)("4a229486",i,!1,{})},function(e,n,t){n=e.exports=t(0)(!0),n.push([e.i,"\n.el-tabs[data-v-8f3109e2] {\n    border-radius: 10px;\n    height: 100%;\n}\n.file-select-container[data-v-8f3109e2] {\n    overflow-y: scroll;\n    overflow-x: hidden;\n}\n.el-tabs_content[data-v-8f3109e2] {\n    padding: 3px;\n}\n","",{version:3,sources:["E:/project/java/resManager/file_select/src/components/FileSelect/src/components/FileSelect/FileSelect.vue"],names:[],mappings:";AA6NA;IACA,oBAAA;IACA,aAAA;CACA;AAEA;IACA,mBAAA;IACA,mBAAA;CACA;AAEA;IACA,aAAA;CACA",file:"FileSelect.vue",sourcesContent:["<template>\n\n    \x3c!-- type=\"border-card\" --\x3e\n    <el-tabs type=\"border-card\" @tab-click=\"tabClick\">\n        \x3c!--\n        <el-tab-pane>\n            <span slot=\"label\"><i class=\"el-icon-date\"></i> 我的行程</span>\n            <p v-for=\"i in (1,100)\">我的行程</p>\n        </el-tab-pane>\n        <el-tab-pane label=\"消息中心\">消息中心</el-tab-pane>\n        <el-tab-pane label=\"角色管理\">角色管理</el-tab-pane>\n        <el-tab-pane label=\"定时任务补偿\">定时任务补偿</el-tab-pane>--\x3e\n\n        <el-tab-pane v-for=\"(i,k) in menuList\" :key=\"k\" :label=\"i.title\">\n            <div :style=\"{'height':height} \" class=\"file-select-container\">\n                <div v-if=\"k===0\">\n                    \x3c!--上传--\x3e\n                    <upload-file :type=\"type\"></upload-file>\n                </div>\n\n                <div v-if=\"k===1\">\n                    \x3c!--图片列表--\x3e\n                    <list-file v-model=\"value\" :trigger=\"trigger\" ref=\"ListFile\" :type=\"type\" :limit=\"limit\" :index=\"index\"></list-file>\n                </div>\n\n                <div v-if=\"k===2\">\n                    \x3c!--在线选择-一般是图片在线选择.--\x3e\n                </div>\n            </div>\n\n            <div v-if=\"k==1 || k==2\">\n                <div style=\"float:right;margin-top: 5px;\">\n                    <button class=\"btn btn-success\" style=\"margin-right:15px;\" @click=\"confirmSelect(index)\">确认</button>\n                    <button class=\"btn btn-danger\">取消</button>\n                </div>\n            </div>\n\n        </el-tab-pane>\n\n    </el-tabs>\n\n</template>\n\n<script>\n\n    /* import Vue from 'vue'\n     import '!style-loader!css-loader!vue-photo-preview/dist/skin.css'\n     import gallery from 'vue-photo-preview'\n\n     Vue.use(gallery, {\n         bgOpacity: 0.8\n     })*/\n    window.randomString_FileSelect = function (len) {\n        len = len || 32\n        var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678'\n        /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/\n        var maxPos = $chars.length\n        var pwd = ''\n        for (var i = 0; i < len; i++) {\n            pwd += $chars.charAt(Math.floor(Math.random() * maxPos))\n        }\n        return pwd\n    }\n\n    window.getUrlParam_FileSelect = function (param) {\n        var reg = new RegExp('(^|&)' + param + '=([^&]*)(&|$)', 'i')\n        //var r = window.location.search.substr(1).match(reg)\n        var arr = window.location.href.split('?')\n        if (arr.length == 2) {\n\n            var r = arr[1].substr(0).match(reg)\n            if (r != null) {\n                var val = unescape(r[2])\n                if (val.trim() === '') {\n                    return null\n                } else {\n                    return val\n                }\n            }\n            return null\n        } else {\n            return null\n        }\n    }\n\n    import UploadFile from '@/components/FileSelect/Sub/UploadFile'\n    import ListFile from '@/components/FileSelect/Sub/ListFile'\n\n    //import '../@/static/plugins/ali-font/iconfont.css'\n\n    export default {\n        components: {ListFile, UploadFile},\n        model: {\n            prop: 'value',\n            event: 'selectImage'\n        },\n\n        name: 'FileSelect',\n        props: {\n            value: {\n                //一张图片是 string,多张是 array\n                type: [String, Array],\n                default () {\n                    return []\n                }\n            },\n            trigger: {\n                type: Boolean,\n                default: false\n            },\n            height: {\n                type: String,\n                default: '400px'\n            },\n            //上传文件类型\n            //image ,doc, video, audio (1,2,3,4)\n            type: {\n                type: String,\n                default: function () {\n                    return getUrlParam_FileSelect('type') || 'image'\n                }\n            },\n            //上传个数限制\n            limit: {\n                type: [Number, String],\n                default: function () {\n                    return Number(getUrlParam_FileSelect('limit')) || 1\n                }\n            },\n            //上传文件的的 url\n            uploadUrl: '',\n            // 加载列表的url\n            listUrl: ''\n        },\n        data () {\n            return {\n                //功能列表\n                menuList: [],\n\n                index: 0,\n\n                menu: {\n                    'uploadImg': [\n                        {title: '图片上传'},\n                        {title: '已上传图片选择'},\n                        {title: '在线插入'}\n                    ],\n                    'uploadDoc': [\n                        {title: '文档上传'},\n                        {title: '已上传文档选择'}\n                    ],\n                    'uploadVideo': [\n                        {title: '视频上传'},\n                        {title: '已上传视频选择'}\n                    ],\n                    'uploadAudio': [\n                        {title: '音频上传'},\n                        {title: '已上传音频选择'}\n                    ],\n                }\n            }\n        },\n        created () {\n\n            this.setMenuList()\n\n        },\n        methods: {\n            setMenuList () {\n                let self = this\n\n                switch (self.type) {\n                    case 'image':\n                        self.menuList = self.menu.uploadImg\n                        break\n                    case 'doc':\n                        self.menuList = self.menu.uploadDoc\n                        break\n                    case 'video':\n                        self.menuList = self.menu.uploadVideo\n                        break\n                    case 'audio':\n                        self.menuList = self.menu.uploadAudio\n                }\n            },\n            tabClick: function (v1, v2) {\n                this.index = eval(v1.index)\n            },\n\n            confirmSelect (index) {\n                //文件或者图片列表.\n                if (index == 1) {\n                    let fileList = this.$refs.ListFile[0].selectFileMap\n\n                    let img = []\n                    if (this.limit === 1) {\n                        //只获取 1 个.\n                        for (let prop in fileList) {\n                            //只需要循环一次就好.\n                            img = prop\n                            break\n                        }\n\n                    } else {\n                        for (let prop in fileList) {\n                            img.push(prop)\n                        }\n                    }\n                    console.log(img)\n                    // limit 为 1张时,就是一个 字符串,多张是 ,是一个数组.\n                    this.$emit('selectImage', img)\n\n                } else if (index == 2) {\n                    //在线选择.\n                }\n            }\n        }\n    }\n<\/script>\n\n<style scoped>\n    .el-tabs {\n        border-radius: 10px;\n        height: 100%;\n    }\n\n    .file-select-container {\n        overflow-y: scroll;\n        overflow-x: hidden;\n    }\n\n    .el-tabs_content {\n        padding: 3px;\n    }\n</style>\n"],sourceRoot:""}])},function(e,n){e.exports=function(e,n){for(var t=[],i={},l=0;l<n.length;l++){var s=n[l],a=s[0],o=s[1],r=s[2],c=s[3],A={id:e+":"+l,css:o,media:r,sourceMap:c};i[a]?i[a].parts.push(A):t.push(i[a]={id:a,parts:[A]})}return t}},function(e,n,t){"use strict";function i(e){a||(t(22),t(24))}var l=t(10),s=t(26),a=!1,o=t(3),r=i,c=o(l.a,s.a,!1,r,"data-v-cffd133a",null);c.options.__file="src/components/FileSelect/Sub/UploadFile.vue",n.a=c.exports},function(e,n,t){var i=t(23);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(1)("2f93fa37",i,!1,{})},function(e,n,t){n=e.exports=t(0)(!0),n.push([e.i,"\n.upload-head[data-v-cffd133a] {\n    margin-bottom: 10px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    margin-right: 10px;\n    margin-left: 10px;\n}\n.upload-container[data-v-cffd133a] {\n    min-height: 300px;\n}\n.file-picker-div[data-v-cffd133a] {\n    position: relative;\n    text-align: center;\n    padding-top: 50px;\n}\n.list-item[data-v-cffd133a] {\n    width: 18%;\n    margin-left: 2%;\n    margin-bottom: 10px;\n    position: relative;\n}\n.list-item img[data-v-cffd133a] {\n    border-radius: 5px;\n    width: 100%;\n}\n.loading-div[data-v-cffd133a] {\n    position: absolute;\n    top: 0;\n    background: rgba(0, 0, 0, 0.2);\n    width: 100%;\n    height: 100%;\n}\n.loading-div img[data-v-cffd133a] {\n    width: 50%;\n    text-align: center;\n    margin-top: 25%;\n    margin-left: 25%;\n}\n.upload-success[data-v-cffd133a] {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n}\n.upload-success-p[data-v-cffd133a] {\n    width: 100%;\n    margin-bottom: 0;\n    background: #007bff;\n    color: #fff;\n    /*font-size: 14px;*/\n    opacity: 1;\n\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n.upload-error[data-v-cffd133a] {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n}\n.upload-error-p[data-v-cffd133a] {\n    width: 100%;\n    margin-bottom: 0;\n    background: #dc3545;\n    color: #fff;\n    /*font-size: 18px;*/\n    opacity: 1;\n\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n.upload-warning-p[data-v-cffd133a] {\n    width: 100%;\n    margin-bottom: 0;\n    background: #ffc107;\n    color: #000;\n    /*font-size: 18px;*/\n    opacity: 1;\n\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n.image-container[data-v-cffd133a] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n\n\n","",{version:3,sources:["E:/project/java/resManager/file_select/src/components/FileSelect/Sub/src/components/FileSelect/Sub/UploadFile.vue"],names:[],mappings:";AA4NA;IACA,oBAAA;IACA,qBAAA;IAAA,qBAAA;IAAA,cAAA;IACA,0BAAA;QAAA,uBAAA;YAAA,+BAAA;IACA,mBAAA;IACA,kBAAA;CACA;AAEA;IACA,kBAAA;CACA;AAEA;IACA,mBAAA;IACA,mBAAA;IACA,kBAAA;CACA;AAEA;IACA,WAAA;IACA,gBAAA;IACA,oBAAA;IACA,mBAAA;CACA;AAEA;IACA,mBAAA;IACA,YAAA;CACA;AAEA;IACA,mBAAA;IACA,OAAA;IACA,+BAAA;IACA,YAAA;IACA,aAAA;CACA;AAEA;IACA,WAAA;IACA,mBAAA;IACA,gBAAA;IACA,iBAAA;CACA;AAEA;IACA,mBAAA;IACA,UAAA;IACA,YAAA;CACA;AAEA;IACA,YAAA;IACA,iBAAA;IACA,oBAAA;IACA,YAAA;IACA,oBAAA;IACA,WAAA;;IAEA,iBAAA;IACA,oBAAA;IACA,wBAAA;CACA;AAEA;IACA,mBAAA;IACA,UAAA;IACA,YAAA;CACA;AAEA;IACA,YAAA;IACA,iBAAA;IACA,oBAAA;IACA,YAAA;IACA,oBAAA;IACA,WAAA;;IAEA,iBAAA;IACA,oBAAA;IACA,wBAAA;CACA;AAEA;IACA,YAAA;IACA,iBAAA;IACA,oBAAA;IACA,YAAA;IACA,oBAAA;IACA,WAAA;;IAEA,iBAAA;IACA,oBAAA;IACA,wBAAA;CACA;AAEA;IACA,qBAAA;IAAA,qBAAA;IAAA,cAAA;IACA,oBAAA;QAAA,gBAAA;CACA",file:"UploadFile.vue",sourcesContent:['<template>\n    <div class="upload-container">\n\n        <div v-show="listItem.length > 0" class="upload-head">\n\n            <span style="font-size:18px">\n                已选择 {{listItem.length}} 张\n            </span>\n\n            <div>\n                <button class="btn" id="addImage" @click="triggerUploadBtn">继续添加</button>\n                <button style="margin-left: 5px" class="btn btn-primary" @click="startUpload()">开始上传</button>\n            </div>\n        </div>\n\n        <div class="image-container">\n            <div v-for="(i,k) in listItem" :key="k" class="list-item">\n                \x3c!--<img src="@/assets/image.png"/>--\x3e\n                <img :src="i.src"/>\n\n                \x3c!--加载层.--\x3e\n                <div class="loading-div" v-if="i.state===1">\n                    <img src="@/assets/loading.gif"/>\n                </div>\n\n                \x3c!--上传成功.--\x3e\n                <div class="upload-success" v-else-if="i.state===2">\n                    <p class="upload-success-p">上传成功 <span style="float:right">✔</span></p>\n                </div>\n\n                \x3c!--上传失败.--\x3e\n                <div class="upload-error" v-if="i.state===3">\n                    <p class="upload-error-p">{{i.msg||\'上传失败\'}} <span style="float:right">✖</span></p>\n                </div>\n\n                \x3c!--上传警告.--\x3e\n                <div class="upload-error" v-if="i.state===4">\n                    <p class="upload-warning-p">{{i.msg}} <span style="float:right">✖</span></p>\n                </div>\n\n            </div>\n\n            <el-tooltip class="item" effect="dark" content="点击继续添加图片" placement="top-start">\n                <div class="list-item" @click="triggerUploadBtn" v-show="listItem.length>0" style="cursor: pointer">\n                    \x3c!--<img src="@/assets/image.png"/>--\x3e\n                    <img src="@/assets/image.png" alt="点击继续添加图片"/>\n\n\n                </div>\n            </el-tooltip>\n\n        </div>\n\n        <div class="file-picker-div" v-show="listItem.length ===0">\n            <img src="@/assets/image.png"/>\n            <div :id="uploadBtnId" class="webUploader-pick">点击选择图片</div>\n        </div>\n\n    </div>\n</template>\n\n<script>\n\n    export default {\n        name: \'UploadFile\',\n        props: {\n            type: {type: String, default: \'image\'},\n            uploadUrl: {type: String, default: \'/upload\'}\n        },\n        data () {\n            return {\n                uploadBtnId: \'webUploader_\' + randomString_FileSelect(10),\n\n                listItem: [],\n\n                uploader: {}\n            }\n        },\n        methods: {\n            triggerUploadBtn () {\n                let self = this\n                $(\'#\' + self.uploadBtnId).find(\'.webuploader-element-invisible\').trigger(\'click\')\n            },\n            startUpload () {\n                this.listItem.forEach((item) => {\n                    if (item.state === 0) {\n                        item.state = 1\n                    }\n                })\n                try {\n                    this.uploader.upload()\n                } catch (e) {\n                    console.log(22222)\n                }\n            }\n        },\n\n        mounted () {\n            let self = this\n\n            /**\n             * 存储 file.id => 在 listItem 数组中的索引\n             * */\n            let KeyMap = {}\n\n            let accepts = []\n\n            switch (self.type) {\n                case \'image\':\n                    accepts = {\n                        title: \'Images\',\n                        extensions: \'gif,jpg,jpeg,bmp,png,ico,icon\',\n                        mimeTypes: \'image/*\'\n                    }\n                    break\n                case \'file\':\n                    accepts = {\n                        title: \'file\',\n                        extensions: \'doc,docx,jpeg,bmp,png\',\n                        mimeTypes: \'image/*\'\n                    }\n                    break\n                case \'video\':\n                    accepts = {\n                        title: \'video\',\n                        extensions: \'mp4,\',\n                        mimeTypes: \'audio/*\'\n                    }\n                    break\n                case \'audio\':\n                    accepts = {\n                        title: \'audio\',\n                        extensions: \'mp3,m4a\',\n                        mimeTypes: \'image/*\'\n                    }\n                    break\n            }\n\n            self.uploader = new WebUploader.Uploader({\n                //自动上传...\n                crop: false,\n                auto: false,\n                // 文件接收服务端。\n                server: self.uploadUrl,\n                // 选择文件的按钮。可选。\n                // 内部根据当前运行是创建，可能是input元素，也可能是flash.\n                pick: {\n                    id: \'#\' + self.uploadBtnId,\n                    multiple: true\n                },\n                // 不压缩image, 默认如果是jpeg，文件上传前会压缩一把再上传！\n                resize: false,\n                accept: accepts,\n                fileNumLimit: 50,\n                chunked: true,\n                compress: {\n                    // 图片质量，只有type为`image/jpeg`的时候才有效。\n                    quality: 20,\n                    // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\n                    allowMagnify: false,\n                    // 是否允许裁剪。\n                    crop: false,\n                    // 是否保留头部meta信息。\n                    preserveHeaders: false,\n                    // 如果发现压缩后文件大小比原来还大，则使用原来图片\n                    // 此属性可能会影响图片自动纠正功能\n                    noCompressIfLarger: false,\n                    // 单位字节，如果图片大小小于此值，不会采用压缩。\n                    compressSize: 0\n                }\n            })\n\n            let uploader = self.uploader\n\n            uploader.on(\'fileQueued\', function (file) {\n                uploader.makeThumb(file, function (error, src) {\n                    if (error) {\n                        src = \'缩略图失败.\'\n                    }\n                    /* 0 待上传, 1 上传中 ,2.上传成功, 3.上传失败(错误信息) , 4. 上传错误(警告信息) */\n                    self.listItem.push({\'id\': file.id, \'src\': src, \'state\': 0, \'msg\': \'\'})\n                    KeyMap[file.id] = self.listItem.length - 1\n\n                }, \'200\', \'200\')\n            })\n\n            uploader.on(\'uploadSuccess\', function (file, resp) {\n                console.log(resp)\n                let item = self.listItem[KeyMap[file.id]]\n                if (resp.state === \'success\') {\n                    item.state = 2\n                } else if (resp.state === \'warning\') {\n                    item.state = 4\n                    item.msg = resp.msg\n                }\n            })\n\n            uploader.on(\'uploadError\', function (file) {\n                let item = self.listItem[KeyMap[file.id]]\n                item.state = 3\n                item.msg = \'网络错误\'\n            })\n\n            uploader.on(\'error\', function (file) {\n                console.log(file)\n                if (file === \'F_DUPLICATE\') {\n                    self.$message({\n                        message: \'文件已经存在\',\n                        type: \'warning\',\n                        showClose: true\n                    })\n                }\n            })\n\n        }\n    }\n<\/script>\n\n\n<style scoped>\n    .upload-head {\n        margin-bottom: 10px;\n        display: flex;\n        justify-content: space-between;\n        margin-right: 10px;\n        margin-left: 10px;\n    }\n\n    .upload-container {\n        min-height: 300px;\n    }\n\n    .file-picker-div {\n        position: relative;\n        text-align: center;\n        padding-top: 50px;\n    }\n\n    .list-item {\n        width: 18%;\n        margin-left: 2%;\n        margin-bottom: 10px;\n        position: relative;\n    }\n\n    .list-item img {\n        border-radius: 5px;\n        width: 100%;\n    }\n\n    .loading-div {\n        position: absolute;\n        top: 0;\n        background: rgba(0, 0, 0, 0.2);\n        width: 100%;\n        height: 100%;\n    }\n\n    .loading-div img {\n        width: 50%;\n        text-align: center;\n        margin-top: 25%;\n        margin-left: 25%;\n    }\n\n    .upload-success {\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n    }\n\n    .upload-success-p {\n        width: 100%;\n        margin-bottom: 0;\n        background: #007bff;\n        color: #fff;\n        /*font-size: 14px;*/\n        opacity: 1;\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .upload-error {\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n    }\n\n    .upload-error-p {\n        width: 100%;\n        margin-bottom: 0;\n        background: #dc3545;\n        color: #fff;\n        /*font-size: 18px;*/\n        opacity: 1;\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .upload-warning-p {\n        width: 100%;\n        margin-bottom: 0;\n        background: #ffc107;\n        color: #000;\n        /*font-size: 18px;*/\n        opacity: 1;\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .image-container {\n        display: flex;\n        flex-wrap: wrap;\n    }\n\n\n</style>\n\n\n<style>\n\n    .webuploader-container {\n        position: relative;\n    }\n\n    .webuploader-element-invisible {\n        position: absolute !important;\n        clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n        clip: rect(1px, 1px, 1px, 1px);\n    }\n\n    .webuploader-pick {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        background: #007bff;\n        padding: 10px 15px;\n        color: #fff;\n        text-align: center;\n        border-radius: 3px;\n        overflow: hidden;\n    }\n\n    .webuploader-pick-hover {\n        background: #0069d9;\n        -webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n    }\n\n    .webuploader-pick-disable {\n        opacity: 0.6;\n        pointer-events: none;\n    }\n\n</style>\n'],sourceRoot:""}])},function(e,n,t){var i=t(25);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(1)("e879b292",i,!1,{})},function(e,n,t){n=e.exports=t(0)(!0),n.push([e.i,"\n.webuploader-container {\n    position: relative;\n}\n.webuploader-element-invisible {\n    position: absolute !important;\n    clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n    clip: rect(1px, 1px, 1px, 1px);\n}\n.webuploader-pick {\n    position: relative;\n    display: inline-block;\n    cursor: pointer;\n    background: #007bff;\n    padding: 10px 15px;\n    color: #fff;\n    text-align: center;\n    border-radius: 3px;\n    overflow: hidden;\n}\n.webuploader-pick-hover {\n    background: #0069d9;\n    -webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n}\n.webuploader-pick-disable {\n    opacity: 0.6;\n    pointer-events: none;\n}\n\n","",{version:3,sources:["E:/project/java/resManager/file_select/src/components/FileSelect/Sub/src/components/FileSelect/Sub/UploadFile.vue"],names:[],mappings:";AAuUA;IACA,mBAAA;CACA;AAEA;IACA,8BAAA;IACA,4BAAA,CAAA,cAAA;IACA,+BAAA;CACA;AAEA;IACA,mBAAA;IACA,sBAAA;IACA,gBAAA;IACA,oBAAA;IACA,mBAAA;IACA,YAAA;IACA,mBAAA;IACA,mBAAA;IACA,iBAAA;CACA;AAEA;IACA,oBAAA;IACA,wDAAA;IACA,gDAAA;CACA;AAEA;IACA,aAAA;IACA,qBAAA;CACA",file:"UploadFile.vue",sourcesContent:['<template>\n    <div class="upload-container">\n\n        <div v-show="listItem.length > 0" class="upload-head">\n\n            <span style="font-size:18px">\n                已选择 {{listItem.length}} 张\n            </span>\n\n            <div>\n                <button class="btn" id="addImage" @click="triggerUploadBtn">继续添加</button>\n                <button style="margin-left: 5px" class="btn btn-primary" @click="startUpload()">开始上传</button>\n            </div>\n        </div>\n\n        <div class="image-container">\n            <div v-for="(i,k) in listItem" :key="k" class="list-item">\n                \x3c!--<img src="@/assets/image.png"/>--\x3e\n                <img :src="i.src"/>\n\n                \x3c!--加载层.--\x3e\n                <div class="loading-div" v-if="i.state===1">\n                    <img src="@/assets/loading.gif"/>\n                </div>\n\n                \x3c!--上传成功.--\x3e\n                <div class="upload-success" v-else-if="i.state===2">\n                    <p class="upload-success-p">上传成功 <span style="float:right">✔</span></p>\n                </div>\n\n                \x3c!--上传失败.--\x3e\n                <div class="upload-error" v-if="i.state===3">\n                    <p class="upload-error-p">{{i.msg||\'上传失败\'}} <span style="float:right">✖</span></p>\n                </div>\n\n                \x3c!--上传警告.--\x3e\n                <div class="upload-error" v-if="i.state===4">\n                    <p class="upload-warning-p">{{i.msg}} <span style="float:right">✖</span></p>\n                </div>\n\n            </div>\n\n            <el-tooltip class="item" effect="dark" content="点击继续添加图片" placement="top-start">\n                <div class="list-item" @click="triggerUploadBtn" v-show="listItem.length>0" style="cursor: pointer">\n                    \x3c!--<img src="@/assets/image.png"/>--\x3e\n                    <img src="@/assets/image.png" alt="点击继续添加图片"/>\n\n\n                </div>\n            </el-tooltip>\n\n        </div>\n\n        <div class="file-picker-div" v-show="listItem.length ===0">\n            <img src="@/assets/image.png"/>\n            <div :id="uploadBtnId" class="webUploader-pick">点击选择图片</div>\n        </div>\n\n    </div>\n</template>\n\n<script>\n\n    export default {\n        name: \'UploadFile\',\n        props: {\n            type: {type: String, default: \'image\'},\n            uploadUrl: {type: String, default: \'/upload\'}\n        },\n        data () {\n            return {\n                uploadBtnId: \'webUploader_\' + randomString_FileSelect(10),\n\n                listItem: [],\n\n                uploader: {}\n            }\n        },\n        methods: {\n            triggerUploadBtn () {\n                let self = this\n                $(\'#\' + self.uploadBtnId).find(\'.webuploader-element-invisible\').trigger(\'click\')\n            },\n            startUpload () {\n                this.listItem.forEach((item) => {\n                    if (item.state === 0) {\n                        item.state = 1\n                    }\n                })\n                try {\n                    this.uploader.upload()\n                } catch (e) {\n                    console.log(22222)\n                }\n            }\n        },\n\n        mounted () {\n            let self = this\n\n            /**\n             * 存储 file.id => 在 listItem 数组中的索引\n             * */\n            let KeyMap = {}\n\n            let accepts = []\n\n            switch (self.type) {\n                case \'image\':\n                    accepts = {\n                        title: \'Images\',\n                        extensions: \'gif,jpg,jpeg,bmp,png,ico,icon\',\n                        mimeTypes: \'image/*\'\n                    }\n                    break\n                case \'file\':\n                    accepts = {\n                        title: \'file\',\n                        extensions: \'doc,docx,jpeg,bmp,png\',\n                        mimeTypes: \'image/*\'\n                    }\n                    break\n                case \'video\':\n                    accepts = {\n                        title: \'video\',\n                        extensions: \'mp4,\',\n                        mimeTypes: \'audio/*\'\n                    }\n                    break\n                case \'audio\':\n                    accepts = {\n                        title: \'audio\',\n                        extensions: \'mp3,m4a\',\n                        mimeTypes: \'image/*\'\n                    }\n                    break\n            }\n\n            self.uploader = new WebUploader.Uploader({\n                //自动上传...\n                crop: false,\n                auto: false,\n                // 文件接收服务端。\n                server: self.uploadUrl,\n                // 选择文件的按钮。可选。\n                // 内部根据当前运行是创建，可能是input元素，也可能是flash.\n                pick: {\n                    id: \'#\' + self.uploadBtnId,\n                    multiple: true\n                },\n                // 不压缩image, 默认如果是jpeg，文件上传前会压缩一把再上传！\n                resize: false,\n                accept: accepts,\n                fileNumLimit: 50,\n                chunked: true,\n                compress: {\n                    // 图片质量，只有type为`image/jpeg`的时候才有效。\n                    quality: 20,\n                    // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\n                    allowMagnify: false,\n                    // 是否允许裁剪。\n                    crop: false,\n                    // 是否保留头部meta信息。\n                    preserveHeaders: false,\n                    // 如果发现压缩后文件大小比原来还大，则使用原来图片\n                    // 此属性可能会影响图片自动纠正功能\n                    noCompressIfLarger: false,\n                    // 单位字节，如果图片大小小于此值，不会采用压缩。\n                    compressSize: 0\n                }\n            })\n\n            let uploader = self.uploader\n\n            uploader.on(\'fileQueued\', function (file) {\n                uploader.makeThumb(file, function (error, src) {\n                    if (error) {\n                        src = \'缩略图失败.\'\n                    }\n                    /* 0 待上传, 1 上传中 ,2.上传成功, 3.上传失败(错误信息) , 4. 上传错误(警告信息) */\n                    self.listItem.push({\'id\': file.id, \'src\': src, \'state\': 0, \'msg\': \'\'})\n                    KeyMap[file.id] = self.listItem.length - 1\n\n                }, \'200\', \'200\')\n            })\n\n            uploader.on(\'uploadSuccess\', function (file, resp) {\n                console.log(resp)\n                let item = self.listItem[KeyMap[file.id]]\n                if (resp.state === \'success\') {\n                    item.state = 2\n                } else if (resp.state === \'warning\') {\n                    item.state = 4\n                    item.msg = resp.msg\n                }\n            })\n\n            uploader.on(\'uploadError\', function (file) {\n                let item = self.listItem[KeyMap[file.id]]\n                item.state = 3\n                item.msg = \'网络错误\'\n            })\n\n            uploader.on(\'error\', function (file) {\n                console.log(file)\n                if (file === \'F_DUPLICATE\') {\n                    self.$message({\n                        message: \'文件已经存在\',\n                        type: \'warning\',\n                        showClose: true\n                    })\n                }\n            })\n\n        }\n    }\n<\/script>\n\n\n<style scoped>\n    .upload-head {\n        margin-bottom: 10px;\n        display: flex;\n        justify-content: space-between;\n        margin-right: 10px;\n        margin-left: 10px;\n    }\n\n    .upload-container {\n        min-height: 300px;\n    }\n\n    .file-picker-div {\n        position: relative;\n        text-align: center;\n        padding-top: 50px;\n    }\n\n    .list-item {\n        width: 18%;\n        margin-left: 2%;\n        margin-bottom: 10px;\n        position: relative;\n    }\n\n    .list-item img {\n        border-radius: 5px;\n        width: 100%;\n    }\n\n    .loading-div {\n        position: absolute;\n        top: 0;\n        background: rgba(0, 0, 0, 0.2);\n        width: 100%;\n        height: 100%;\n    }\n\n    .loading-div img {\n        width: 50%;\n        text-align: center;\n        margin-top: 25%;\n        margin-left: 25%;\n    }\n\n    .upload-success {\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n    }\n\n    .upload-success-p {\n        width: 100%;\n        margin-bottom: 0;\n        background: #007bff;\n        color: #fff;\n        /*font-size: 14px;*/\n        opacity: 1;\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .upload-error {\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n    }\n\n    .upload-error-p {\n        width: 100%;\n        margin-bottom: 0;\n        background: #dc3545;\n        color: #fff;\n        /*font-size: 18px;*/\n        opacity: 1;\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .upload-warning-p {\n        width: 100%;\n        margin-bottom: 0;\n        background: #ffc107;\n        color: #000;\n        /*font-size: 18px;*/\n        opacity: 1;\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .image-container {\n        display: flex;\n        flex-wrap: wrap;\n    }\n\n\n</style>\n\n\n<style>\n\n    .webuploader-container {\n        position: relative;\n    }\n\n    .webuploader-element-invisible {\n        position: absolute !important;\n        clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n        clip: rect(1px, 1px, 1px, 1px);\n    }\n\n    .webuploader-pick {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        background: #007bff;\n        padding: 10px 15px;\n        color: #fff;\n        text-align: center;\n        border-radius: 3px;\n        overflow: hidden;\n    }\n\n    .webuploader-pick-hover {\n        background: #0069d9;\n        -webkit-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n    }\n\n    .webuploader-pick-disable {\n        opacity: 0.6;\n        pointer-events: none;\n    }\n\n</style>\n'],sourceRoot:""}])},function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"upload-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.listItem.length>0,expression:"listItem.length > 0"}],staticClass:"upload-head"},[i("span",{staticStyle:{"font-size":"18px"}},[e._v("\n            已选择 "+e._s(e.listItem.length)+" 张\n        ")]),e._v(" "),i("div",[i("button",{staticClass:"btn",attrs:{id:"addImage"},on:{click:e.triggerUploadBtn}},[e._v("继续添加")]),e._v(" "),i("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"5px"},on:{click:function(n){e.startUpload()}}},[e._v("开始上传")])])]),e._v(" "),i("div",{staticClass:"image-container"},[e._l(e.listItem,function(n,l){return i("div",{key:l,staticClass:"list-item"},[i("img",{attrs:{src:n.src}}),e._v(" "),1===n.state?i("div",{staticClass:"loading-div"},[i("img",{attrs:{src:t(27)}})]):2===n.state?i("div",{staticClass:"upload-success"},[e._m(0,!0)]):e._e(),e._v(" "),3===n.state?i("div",{staticClass:"upload-error"},[i("p",{staticClass:"upload-error-p"},[e._v(e._s(n.msg||"上传失败")+" "),i("span",{staticStyle:{float:"right"}},[e._v("✖")])])]):e._e(),e._v(" "),4===n.state?i("div",{staticClass:"upload-error"},[i("p",{staticClass:"upload-warning-p"},[e._v(e._s(n.msg)+" "),i("span",{staticStyle:{float:"right"}},[e._v("✖")])])]):e._e()])}),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击继续添加图片",placement:"top-start"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.listItem.length>0,expression:"listItem.length>0"}],staticClass:"list-item",staticStyle:{cursor:"pointer"},on:{click:e.triggerUploadBtn}},[i("img",{attrs:{src:t(11),alt:"点击继续添加图片"}})])])],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.listItem.length,expression:"listItem.length ===0"}],staticClass:"file-picker-div"},[i("img",{attrs:{src:t(11)}}),e._v(" "),i("div",{staticClass:"webUploader-pick",attrs:{id:e.uploadBtnId}},[e._v("点击选择图片")])])])},l=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("p",{staticClass:"upload-success-p"},[e._v("上传成功 "),t("span",{staticStyle:{float:"right"}},[e._v("✔")])])}];i._withStripped=!0;var s={render:i,staticRenderFns:l};n.a=s},function(e,n){e.exports="data:image/gif;base64,R0lGODlhJQAlAJECAL3L2AYrTv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgACACwAAAAAJQAlAAACi5SPqcvtDyGYIFpF690i8xUw3qJBwUlSadmcLqYmGQu6KDIeM13beGzYWWy3DlB4IYaMk+Dso2RWkFCfLPcRvFbZxFLUDTt21BW56TyjRep1e20+i+eYMR145W2eefj+6VFmgTQi+ECVY8iGxcg35phGo/iDFwlTyXWphwlm1imGRdcnuqhHeop6UAAAIfkEBQoAAgAsEAACAAQACwAAAgWMj6nLXAAh+QQFCgACACwVAAUACgALAAACFZQvgRi92dyJcVJlLobUdi8x4bIhBQAh+QQFCgACACwXABEADAADAAACBYyPqcsFACH5BAUKAAIALBUAFQAKAAsAAAITlGKZwWoMHYxqtmplxlNT7ixGAQAh+QQFCgACACwQABgABAALAAACBYyPqctcACH5BAUKAAIALAUAFQAKAAsAAAIVlC+BGL3Z3IlxUmUuhtR2LzHhsiEFACH5BAUKAAIALAEAEQAMAAMAAAIFjI+pywUAIfkEBQoAAgAsBQAFAAoACwAAAhOUYJnAagwdjGq2amXGU1PuLEYBACH5BAUKAAIALBAAAgAEAAsAAAIFhI+py1wAIfkEBQoAAgAsFQAFAAoACwAAAhWUL4AIvdnciXFSZS6G1HYvMeGyIQUAIfkEBQoAAgAsFwARAAwAAwAAAgWEj6nLBQAh+QQFCgACACwVABUACgALAAACE5RgmcBqDB2MarZqZcZTU+4sRgEAIfkEBQoAAgAsEAAYAAQACwAAAgWEj6nLXAAh+QQFCgACACwFABUACgALAAACFZQvgAi92dyJcVJlLobUdi8x4bIhBQAh+QQFCgACACwBABEADAADAAACBYSPqcsFADs="},function(e,n,t){"use strict";function i(e){a||t(29)}var l=t(12),s=t(59),a=!1,o=t(3),r=i,c=o(l.a,s.a,!1,r,"data-v-c229c100",null);c.options.__file="src/components/FileSelect/Sub/ListFile.vue",n.a=c.exports},function(e,n,t){var i=t(30);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(1)("ac3e5eb8",i,!1,{})},function(e,n,t){n=e.exports=t(0)(!0),n.push([e.i,"\n.view-selected-img-div[data-v-c229c100] {\n    padding-top: 5px;\n    padding-bottom: 5px;\n    border-top: 2px dashed #3da1db;\n    border-bottom: 2px dashed #3da1db;\n    margin-top: 5px;\n    margin-bottom: 5px\n}\n.confirm-div[data-v-c229c100] {\n    position: absolute;\n    top: 0;\n    background: rgba(255, 255, 255, 0.4);\n    width: 100%;\n    height: 100%;\n    border: 3px rgb(0, 123, 255) solid;\n}\n.confirm-img[data-v-c229c100] {\n    width: 35%;\n    text-align: center;\n    right: 0;\n    bottom: 0;\n    position: absolute;\n}\n.view-type-select-div[data-v-c229c100] {\n    font-size: 18px;\n}\n.view-type-select-div span[data-v-c229c100] {\n    margin-left: 15px;\n    font-size: 25px;\n    cursor: pointer;\n}\n.file-list-container[data-v-c229c100] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.file-item[data-v-c229c100] {\n    position: relative;\n    width: 18%;\n    margin-left: 2%;\n    margin-bottom: 10px;\n    -ms-flex-item-align: end;\n        align-self: flex-end;\n}\n.list-img[data-v-c229c100] {\n    width: 100%;\n    cursor: pointer;\n}\n.file-item-container[data-v-c229c100] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.list-container[data-v-c229c100] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.text-overflow[data-v-c229c100] {\n    overflow: hidden;\n    display: inherit;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    width: 100%;\n    color: #fff;\n    background-color: rgba(0, 0, 0, 0.8);\n    border-color: #007bff;\n    /*font-size: 15px;*/\n    padding-left: 4px;\n    padding-bottom: 3px;\n}\n","",{version:3,sources:["E:/project/java/resManager/file_select/src/components/FileSelect/Sub/src/components/FileSelect/Sub/ListFile.vue"],names:[],mappings:";AA6VA;IACA,iBAAA;IACA,oBAAA;IACA,+BAAA;IACA,kCAAA;IACA,gBAAA;IACA,kBAAA;CACA;AAEA;IACA,mBAAA;IACA,OAAA;IACA,qCAAA;IACA,YAAA;IACA,aAAA;IACA,mCAAA;CACA;AAEA;IACA,WAAA;IACA,mBAAA;IACA,SAAA;IACA,UAAA;IACA,mBAAA;CACA;AAEA;IACA,gBAAA;CACA;AAEA;IACA,kBAAA;IACA,gBAAA;IACA,gBAAA;CACA;AAEA;IACA,qBAAA;IAAA,qBAAA;IAAA,cAAA;IACA,oBAAA;QAAA,gBAAA;CACA;AAEA;IACA,mBAAA;IACA,WAAA;IACA,gBAAA;IACA,oBAAA;IACA,yBAAA;QAAA,qBAAA;CACA;AAEA;IACA,YAAA;IACA,gBAAA;CACA;AAEA;IACA,qBAAA;IAAA,qBAAA;IAAA,cAAA;IACA,6BAAA;IAAA,8BAAA;QAAA,2BAAA;YAAA,uBAAA;CACA;AAEA;IACA,qBAAA;IAAA,qBAAA;IAAA,cAAA;IACA,6BAAA;IAAA,8BAAA;QAAA,2BAAA;YAAA,uBAAA;CACA;AAEA;IACA,iBAAA;IACA,iBAAA;IACA,oBAAA;IACA,wBAAA;IACA,YAAA;IACA,YAAA;IACA,qCAAA;IACA,sBAAA;IACA,oBAAA;IACA,kBAAA;IACA,oBAAA;CACA",file:"ListFile.vue",sourcesContent:['<template>\n    <div class="list-container">\n        \x3c!--排列方式.--\x3e\n        <div class="view-type-select-div"\n             style="display: flex;justify-content: space-between;padding-top:3px;padding-bottom: 6px">\n            <div style="padding-top: 3px">\n                <label style="align-self: center;margin-bottom: 0">\n                    查看视图:\n                </label>\n                <span :style="{\'color\':viewType==\'timeline\'?\'#007bff\':\'black\'}"\n                      class="iconfont icon-shijianzhou"\n                      @click="changeType(\'timeline\')"></span>\n                <span :style="{\'color\':viewType==\'list\'?\'#007bff\':\'black\'}"\n                      class="iconfont icon-jiugongge"\n                      @click="changeType(\'list\')"></span>\n            </div>\n            <button @click="viewCurrentVisible=!viewCurrentVisible" class="btn btn-sm"\n                    :class="viewCurrentVisible?\'btn-warning\':\'btn-primary\'"\n                    style="font-size: 16px;cursor: pointer;margin-right:4px ">\n                {{viewCurrentVisible?\'隐藏当前\':\'查看当前已选\'}}\n            </button>\n        </div>\n\n\n        \x3c!--当前已选择的图片列表.--\x3e\n        <div class="file-list-container view-selected-img-div"\n             v-show="viewCurrentVisible&&getObjLen(selectFileMap)>1">\n            \x3c!--@click="select(i,k)"--\x3e\n            <div v-for="(i,k) in selectFileMap" :key="k" class="file-item">\n                <div style="height: 110px;overflow: hidden;display: flex">\n                    <img class="list-img" :src="k" style="align-self: flex-end;"/>\n                </div>\n                <span style="text-align: center;cursor: pointer;background: rgb(61,161,219)"\n                      class="text-overflow">{{i.fileName}}</span>\n\n                <span @click="removeSelect(i,k)"\n                      style="padding: 2px;position: absolute;right:0;top:0;cursor: pointer;background:rgba(255,0,0,0.6)">✖</span>\n            </div>\n        </div>\n\n\n        <div class="item-container">\n\n            <div class="file-item-container">\n\n\n                <div class="file-list-container" v-if="viewType===\'list\'">\n                    <div v-for="(i,k) in fileList" :key="k" class="file-item" @click="select(i,k)">\n                        <img class="list-img" :src="\'http://localhost:8000\'+i.path" :preview="k"\n                             :preview-text="i.fileName"/>\n                        <span style="margin-bottom: 0" class="text-overflow" v-html="i.fileName"></span>\n\n                        \x3c!--选中层.--\x3e\n                        \x3c!--v-if="i.state===1"--\x3e\n                        <div class="confirm-div" v-if="i.selected">\n                            <img class="confirm-img" src="@/assets/yes.png"/>\n                        </div>\n\n                    </div>\n                </div>\n\n                <div v-else-if="viewType===\'timeline\'" v-for="(i,k) in timelineObject" :key="k"\n                     style="border-bottom: 2px solid #888888">\n                    \x3c!--日期..--\x3e\n                    <p style="font-size:25px;font-weight: 600;">{{k}}</p>\n                    <div class="file-list-container">\n\n                        <div v-for="(i,k) in timelineObject[k]" :key="k" class="file-item" @click="select(i,k)">\n                            <img class="list-img" :src="\'http://localhost:8000\'+i.path" :preview="k"\n                                 :preview-text="i.fileName"/>\n                            <span style="margin-bottom: 0" class="text-overflow" v-html="i.fileName"></span>\n\n                            \x3c!--选中层.--\x3e\n                            \x3c!--v-if="i.state===1"--\x3e\n                            <div class="confirm-div" v-if="i.selected">\n                                <img class="confirm-img" src="@/assets/yes.png"/>\n                            </div>\n\n                        </div>\n\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n</template>\n\n<script>\n\n    /*import Vue from \'vue\'\n    import \'!style-loader!css-loader!vue-photo-preview/dist/skin.css\'\n    import gallery from \'vue-photo-preview\'\n\n    Vue.use(gallery, {\n        bgOpacity: 0.8\n    })*/\n\n    export default {\n        name: \'ListFile\',\n\n        model: {\n            prop: \'value\',\n            event: \'changeSelect\'\n        },\n\n        props: {\n            /**\n             * 当trigger 变更为true 时.更新 回显的数据....\n             * */\n            trigger: {\n                type: Boolean,\n                default: false\n            },\n            /**\n             * 真正要传递的 图片 url.\n             */\n            value: {\n                type: Array, default: () => {\n                    return []\n                }\n            },\n            index: {type: Number, default: 1},\n\n            type: {\n                type: String, default: function () {\n                    return \'image\'\n                }\n            },\n            limit: {type: Number, default: 1},\n            fetchUrl: {type: String, default: \'/upload/listFile\'},\n\n        },\n        data () {\n            return {\n                //文件列表\n                fileList: [],\n\n                //时间轴 文件列表.\n                timelineObject: {},\n\n                requestParam: {page: 1, limit: 10},\n                endPage: 0,\n\n                //处于加载中,不进行再次加载\n                loading: false,\n                //为true时,结束加载..\n                endLoad: false,\n\n                //查看列表类型.默认list\n                viewType: \'list\',\n\n                viewCurrentVisible: false,\n\n                /**\n                 * 当前选择图片的 url . 以及 索引:\n                 * {\'1.jpg\':1,\'2.jpg\':2}\n                 */\n                selectFileMap: {}\n            }\n        },\n        mounted () {\n            let self = this\n\n            self.requestParam.type = self.type\n\n            self.loadData()\n\n            //监听滚动..\n            $(\'.file-select-container\').scroll(function () {\n                if (self.index != 1) {\n                    return\n                }\n                if (self.loading || self.loading == undefined) {\n                    return\n                }\n\n                let dom = $(this)\n\n                let scrollTop = dom.scrollTop()\n                let scrollHeight = dom.height()\n                let windowHeight = $(\'.list-container\').height()\n\n                let h = scrollTop + scrollHeight\n\n                if (self.endPage < self.requestParam.page) {\n                    if (h + 1 >= windowHeight) {\n                        self.loadData()\n                    }\n                }\n            })\n\n        },\n        methods: {\n            loadData () {\n                let self = this\n                if (self.endPage < self.requestParam.page) {\n                    console.log(\'%c开始执行 ajax 加载\', \'background:orange;color:#fff\')\n                    $.get(self.fetchUrl, self.requestParam, function (resp) {\n                        if (resp != null && resp.fileList != null && resp.fileList.length > 0) {\n                            self.requestParam.page++\n                            if (resp != undefined) {\n\n                                resp.fileList.forEach((item) => {\n\n                                    item.selected = false\n\n                                    //记录原索引.\n                                    item.srcIndex = self.fileList.length\n\n                                    if (self.selectFileMap[item.path] != null) {\n                                        self.selectFileMap[item.path].index = item.srcIndex\n                                        item.selected = true\n                                    }\n\n                                    //添加到文件列表.\n                                    let i = self.fileList.push(item)\n\n                                    let newItem = self.fileList[i - 1]\n\n                                    //添加到时间轴 文件列表.\n                                    let uploadTime = item.uploadTime.substr(0, 10)\n                                    let arr = self.timelineObject[uploadTime]\n                                    if (arr == null) {\n                                        arr = self.timelineObject[uploadTime] = []\n                                    }\n                                    arr.push(newItem)\n\n                                })\n                            }\n                        } else {\n                            self.endPage = self.requestParam.page\n                        }\n                        setTimeout(() => {\n                            let h1 = $(\'.file-select-container\').height()\n                            let h2 = $(\'.list-container\').height()\n                            if (h1 >= h2 && h2 != 0) {\n                                console.log(\'高度太低.再次加载\')\n                                self.loadData()\n                            }\n                        }, 300)\n                        //self.$previewRefresh()\n                    })\n                }\n            },\n            changeType (type) {\n                this.viewType = type\n                //可能需要重拍数据..\n            },\n            /**\n             * @param item\n             * @param index 被废弃, 使用 item.srcIndex\n             * */\n            select (item, index) {\n                if (this.limit == 1) {\n                    // 限制为1 先删除旧的.\n                    let prop = \'\'\n                    let index2 = 0\n                    for (let props in this.selectFileMap) {\n                        prop = props\n                        if (this.selectFileMap.hasOwnProperty(props)) {\n                            index2 = this.selectFileMap[props]\n                        }\n                        break\n                    }\n                    if (prop != \'\') {\n                        let file = this.fileList[index2.index]\n                        file.selected = false\n                        this.selectFileMap[prop] = null\n                        delete this.selectFileMap[prop]\n                    }\n                } else {\n                    if (!this.selectFileMap.hasOwnProperty(item.path)) {\n                        if (this.limit < this.getObjLen(this.selectFileMap)) {\n                            this.$alert(\'最多上传 <span style="font-weight: 600;color:red">\' + this.limit + \' </span>个,请先移除旧数据\', \'提示\', {\n                                type: \'error\',\n                                dangerouslyUseHTMLString: true\n                            }).catch(function () {\n                            })\n                            return\n                        }\n                    }\n                }\n\n                item.selected = !item.selected\n                if (item.selected) {\n                    this.selectFileMap[item.path] = {index: item.srcIndex, fileName: item.fileName}\n                } else {\n                    this.selectFileMap[item.path] = null\n                    delete this.selectFileMap[item.path]\n                }\n            },\n            getObjLen (obj) {\n                return Object.getOwnPropertyNames(obj).length\n            },\n\n            /**\n             *\n             * @param i  所在原数组(fileList) 索引 以及 名字.\n             * @param k  图片或者资源的 path (全路径.)..\n             */\n            removeSelect (i, k) {\n                console.log(k)\n\n                if (i.index != null) {\n                    this.selectFileMap[k] = null\n                    delete this.selectFileMap[k]\n                    this.fileList[i.index].selected = false\n                } else {\n                    //Object.assign(this.selectFileMap, this.selectFileMap)\n                    this.$delete(this.selectFileMap, k)\n                }\n\n            },\n            updateViewBack () {\n                //获取从父组件传递的数组,或字符串.\n                let val = this.value\n\n                if (this.limit == 1) {\n                    this.selectFileMap[val] = null\n                } else {\n                    val.forEach((item) => {\n                        let arr = item.split(\'/\')\n                        this.selectFileMap[item] = {index: null, fileName: arr.pop()}\n                    })\n                }\n                console.log(\'%c回显数据更新完毕!\', \'background:blue;color:#fff\')\n            }\n        },\n\n        watch: {\n            index: function (newVal) {\n                if (newVal == 1) {\n                    this.loadData()\n                }\n            },\n            trigger: function (newVal, oldVal) {\n                /*console.log(newVal)*/\n                if (newVal === true) {\n                    this.updateViewBack()\n                }\n            }\n        }\n    }\n<\/script>\n\n<style scoped>\n    .view-selected-img-div {\n        padding-top: 5px;\n        padding-bottom: 5px;\n        border-top: 2px dashed #3da1db;\n        border-bottom: 2px dashed #3da1db;\n        margin-top: 5px;\n        margin-bottom: 5px\n    }\n\n    .confirm-div {\n        position: absolute;\n        top: 0;\n        background: rgba(255, 255, 255, 0.4);\n        width: 100%;\n        height: 100%;\n        border: 3px rgb(0, 123, 255) solid;\n    }\n\n    .confirm-img {\n        width: 35%;\n        text-align: center;\n        right: 0;\n        bottom: 0;\n        position: absolute;\n    }\n\n    .view-type-select-div {\n        font-size: 18px;\n    }\n\n    .view-type-select-div span {\n        margin-left: 15px;\n        font-size: 25px;\n        cursor: pointer;\n    }\n\n    .file-list-container {\n        display: flex;\n        flex-wrap: wrap;\n    }\n\n    .file-item {\n        position: relative;\n        width: 18%;\n        margin-left: 2%;\n        margin-bottom: 10px;\n        align-self: flex-end;\n    }\n\n    .list-img {\n        width: 100%;\n        cursor: pointer;\n    }\n\n    .file-item-container {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .list-container {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .text-overflow {\n        overflow: hidden;\n        display: inherit;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        width: 100%;\n        color: #fff;\n        background-color: rgba(0, 0, 0, 0.8);\n        border-color: #007bff;\n        /*font-size: 15px;*/\n        padding-left: 4px;\n        padding-bottom: 3px;\n    }\n</style>\n'],sourceRoot:""}])},function(e,n,t){e.exports={default:t(32),__esModule:!0}},function(e,n,t){t(33);var i=t(2).Object;e.exports=function(e){return i.getOwnPropertyNames(e)}},function(e,n,t){t(34)("getOwnPropertyNames",function(){return t(45).f})},function(e,n,t){var i=t(35),l=t(2),s=t(7);e.exports=function(e,n){var t=(l.Object||{})[e]||Object[e],a={};a[e]=n(t),i(i.S+i.F*s(function(){t(1)}),"Object",a)}},function(e,n,t){var i=t(4),l=t(2),s=t(36),a=t(38),o=t(13),r=function(e,n,t){var c,A,p,d=e&r.F,u=e&r.G,f=e&r.S,m=e&r.P,g=e&r.B,v=e&r.W,h=u?l:l[n]||(l[n]={}),b=h.prototype,x=u?i:f?i[n]:(i[n]||{}).prototype;u&&(t=n);for(c in t)(A=!d&&x&&void 0!==x[c])&&o(h,c)||(p=A?x[c]:t[c],h[c]=u&&"function"!=typeof x[c]?t[c]:g&&A?s(p,i):v&&x[c]==p?function(e){var n=function(n,t,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,t)}return new e(n,t,i)}return e.apply(this,arguments)};return n.prototype=e.prototype,n}(p):m&&"function"==typeof p?s(Function.call,p):p,m&&((h.virtual||(h.virtual={}))[c]=p,e&r.R&&b&&!b[c]&&a(b,c,p)))};r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,r.U=64,r.R=128,e.exports=r},function(e,n,t){var i=t(37);e.exports=function(e,n,t){if(i(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,i){return e.call(n,t,i)};case 3:return function(t,i,l){return e.call(n,t,i,l)}}return function(){return e.apply(n,arguments)}}},function(e,n){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,n,t){var i=t(39),l=t(44);e.exports=t(6)?function(e,n,t){return i.f(e,n,l(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var i=t(40),l=t(41),s=t(43),a=Object.defineProperty;n.f=t(6)?Object.defineProperty:function(e,n,t){if(i(e),n=s(n,!0),i(t),l)try{return a(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var i=t(5);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,n,t){e.exports=!t(6)&&!t(7)(function(){return 7!=Object.defineProperty(t(42)("div"),"a",{get:function(){return 7}}).a})},function(e,n,t){var i=t(5),l=t(4).document,s=i(l)&&i(l.createElement);e.exports=function(e){return s?l.createElement(e):{}}},function(e,n,t){var i=t(5);e.exports=function(e,n){if(!i(e))return e;var t,l;if(n&&"function"==typeof(t=e.toString)&&!i(l=t.call(e)))return l;if("function"==typeof(t=e.valueOf)&&!i(l=t.call(e)))return l;if(!n&&"function"==typeof(t=e.toString)&&!i(l=t.call(e)))return l;throw TypeError("Can't convert object to primitive value")}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){var i=t(8),l=t(49).f,s={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return l(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==s.call(e)?o(e):l(i(e))}},function(e,n,t){var i=t(47);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,n){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,n){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,n,t){var i=t(50),l=t(58).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return i(e,l)}},function(e,n,t){var i=t(13),l=t(8),s=t(51)(!1),a=t(54)("IE_PROTO");e.exports=function(e,n){var t,o=l(e),r=0,c=[];for(t in o)t!=a&&i(o,t)&&c.push(t);for(;n.length>r;)i(o,t=n[r++])&&(~s(c,t)||c.push(t));return c}},function(e,n,t){var i=t(8),l=t(52),s=t(53);e.exports=function(e){return function(n,t,a){var o,r=i(n),c=l(r.length),A=s(a,c);if(e&&t!=t){for(;c>A;)if((o=r[A++])!=o)return!0}else for(;c>A;A++)if((e||A in r)&&r[A]===t)return e||A||0;return!e&&-1}}},function(e,n,t){var i=t(14),l=Math.min;e.exports=function(e){return e>0?l(i(e),9007199254740991):0}},function(e,n,t){var i=t(14),l=Math.max,s=Math.min;e.exports=function(e,n){return e=i(e),e<0?l(e+n,0):s(e,n)}},function(e,n,t){var i=t(55)("keys"),l=t(57);e.exports=function(e){return i[e]||(i[e]=l(e))}},function(e,n,t){var i=t(2),l=t(4),s=l["__core-js_shared__"]||(l["__core-js_shared__"]={});(e.exports=function(e,n){return s[e]||(s[e]=void 0!==n?n:{})})("versions",[]).push({version:i.version,mode:t(56)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,n){e.exports=!0},function(e,n){var t=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+i).toString(36))}},function(e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"list-container"},[i("div",{staticClass:"view-type-select-div",staticStyle:{display:"flex","justify-content":"space-between","padding-top":"3px","padding-bottom":"6px"}},[i("div",{staticStyle:{"padding-top":"3px"}},[i("label",{staticStyle:{"align-self":"center","margin-bottom":"0"}},[e._v("\n                查看视图:\n            ")]),e._v(" "),i("span",{staticClass:"iconfont icon-shijianzhou",style:{color:"timeline"==e.viewType?"#007bff":"black"},on:{click:function(n){e.changeType("timeline")}}}),e._v(" "),i("span",{staticClass:"iconfont icon-jiugongge",style:{color:"list"==e.viewType?"#007bff":"black"},on:{click:function(n){e.changeType("list")}}})]),e._v(" "),i("button",{staticClass:"btn btn-sm",class:e.viewCurrentVisible?"btn-warning":"btn-primary",staticStyle:{"font-size":"16px",cursor:"pointer","margin-right":"4px"},on:{click:function(n){e.viewCurrentVisible=!e.viewCurrentVisible}}},[e._v("\n            "+e._s(e.viewCurrentVisible?"隐藏当前":"查看当前已选")+"\n        ")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.viewCurrentVisible&&e.getObjLen(e.selectFileMap)>1,expression:"viewCurrentVisible&&getObjLen(selectFileMap)>1"}],staticClass:"file-list-container view-selected-img-div"},e._l(e.selectFileMap,function(n,t){return i("div",{key:t,staticClass:"file-item"},[i("div",{staticStyle:{height:"110px",overflow:"hidden",display:"flex"}},[i("img",{staticClass:"list-img",staticStyle:{"align-self":"flex-end"},attrs:{src:t}})]),e._v(" "),i("span",{staticClass:"text-overflow",staticStyle:{"text-align":"center",cursor:"pointer",background:"rgb(61,161,219)"}},[e._v(e._s(n.fileName))]),e._v(" "),i("span",{staticStyle:{padding:"2px",position:"absolute",right:"0",top:"0",cursor:"pointer",background:"rgba(255,0,0,0.6)"},on:{click:function(i){e.removeSelect(n,t)}}},[e._v("✖")])])})),e._v(" "),i("div",{staticClass:"item-container"},[i("div",{staticClass:"file-item-container"},["list"===e.viewType?i("div",{staticClass:"file-list-container"},e._l(e.fileList,function(n,l){return i("div",{key:l,staticClass:"file-item",on:{click:function(t){e.select(n,l)}}},[i("img",{staticClass:"list-img",attrs:{src:"http://localhost:8000"+n.path,preview:l,"preview-text":n.fileName}}),e._v(" "),i("span",{staticClass:"text-overflow",staticStyle:{"margin-bottom":"0"},domProps:{innerHTML:e._s(n.fileName)}}),e._v(" "),n.selected?i("div",{staticClass:"confirm-div"},[i("img",{staticClass:"confirm-img",attrs:{src:t(15)}})]):e._e()])})):"timeline"===e.viewType?e._l(e.timelineObject,function(n,l){return i("div",{key:l,staticStyle:{"border-bottom":"2px solid #888888"}},[i("p",{staticStyle:{"font-size":"25px","font-weight":"600"}},[e._v(e._s(l))]),e._v(" "),i("div",{staticClass:"file-list-container"},e._l(e.timelineObject[l],function(n,l){return i("div",{key:l,staticClass:"file-item",on:{click:function(t){e.select(n,l)}}},[i("img",{staticClass:"list-img",attrs:{src:"http://localhost:8000"+n.path,preview:l,"preview-text":n.fileName}}),e._v(" "),i("span",{staticClass:"text-overflow",staticStyle:{"margin-bottom":"0"},domProps:{innerHTML:e._s(n.fileName)}}),e._v(" "),n.selected?i("div",{staticClass:"confirm-div"},[i("img",{staticClass:"confirm-img",attrs:{src:t(15)}})]):e._e()])}))])}):e._e()],2)])])},l=[];i._withStripped=!0;var s={render:i,staticRenderFns:l};n.a=s},function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabClick}},e._l(e.menuList,function(n,i){return t("el-tab-pane",{key:i,attrs:{label:n.title}},[t("div",{staticClass:"file-select-container",style:{height:e.height}},[0===i?t("div",[t("upload-file",{attrs:{type:e.type}})],1):e._e(),e._v(" "),1===i?t("div",[t("list-file",{ref:"ListFile",refInFor:!0,attrs:{trigger:e.trigger,type:e.type,limit:e.limit,index:e.index},model:{value:e.value,callback:function(n){e.value=n},expression:"value"}})],1):e._e(),e._v(" "),2===i?t("div"):e._e()]),e._v(" "),1==i||2==i?t("div",[t("div",{staticStyle:{float:"right","margin-top":"5px"}},[t("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"15px"},on:{click:function(n){e.confirmSelect(e.index)}}},[e._v("确认")]),e._v(" "),t("button",{staticClass:"btn btn-danger"},[e._v("取消")])])]):e._e()])}))},l=[];i._withStripped=!0;var s={render:i,staticRenderFns:l};n.a=s}])});